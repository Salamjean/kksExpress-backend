{
    "info": {
        "_postman_id": "kks-express-collection",
        "name": "KKS Express API",
        "description": "Collection pour tester les endpoints Utilisateurs, Livreurs et Commandes",
        "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
    },
    "item": [
        {
            "name": "Auth Utilisateur",
            "item": [
                {
                    "name": "Inscription Utilisateur",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "var jsonData = pm.response.json();",
                                    "if (jsonData.token) {",
                                    "    pm.environment.set(\"user_token\", jsonData.token);",
                                    "    console.log(\"✅ Token utilisateur sauvegardé automatiquement\");",
                                    "}"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"nom\": \"Dupont\",\n    \"prenom\": \"Jean\",\n    \"email\": \"jean.dupont@test.com\",\n    \"telephone\": \"0708090201\",\n    \"password\": \"password123\",\n    \"adresse\": \"Rue de la Paix, Cocody\",\n    \"ville\": \"Abidjan\",\n    \"genre\": \"M\"\n}",
                            "options": {
                                "raw": {
                                    "language": "json"
                                }
                            }
                        },
                        "url": {
                            "raw": "{{base_url}}/api/auth/user/register",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "auth",
                                "user",
                                "register"
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Connexion Utilisateur",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "var jsonData = pm.response.json();",
                                    "if (jsonData.token) {",
                                    "    pm.environment.set(\"user_token\", jsonData.token);",
                                    "    console.log(\"✅ Token utilisateur sauvegardé automatiquement\");",
                                    "}"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"email\": \"jean.dupont@test.com\",\n    \"password\": \"password123\"\n}",
                            "options": {
                                "raw": {
                                    "language": "json"
                                }
                            }
                        },
                        "url": {
                            "raw": "{{base_url}}/api/auth/user/login",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "auth",
                                "user",
                                "login"
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Mon Profil Utilisateur",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{user_token}}",
                                "type": "text"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/auth/user/profile",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "auth",
                                "user",
                                "profile"
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Mot de Passe Oublié",
                    "request": {
                        "method": "POST",
                        "header": [],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"email\": \"jean.dupont@test.com\"\n}",
                            "options": {
                                "raw": {
                                    "language": "json"
                                }
                            }
                        },
                        "url": {
                            "raw": "{{base_url}}/api/auth/user/forgot-password",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "auth",
                                "user",
                                "forgot-password"
                            ]
                        }
                    },
                    "response": []
                }
            ]
        },
        {
            "name": "Auth Livreur",
            "item": [
                {
                    "name": "Connexion Livreur",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "var jsonData = pm.response.json();",
                                    "if (jsonData.token) {",
                                    "    pm.environment.set(\"livreur_token\", jsonData.token);",
                                    "    console.log(\"✅ Token livreur sauvegardé automatiquement\");",
                                    "}"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"email\": \"livreur@test.com\",\n    \"password\": \"password123\"\n}",
                            "options": {
                                "raw": {
                                    "language": "json"
                                }
                            }
                        },
                        "url": {
                            "raw": "{{base_url}}/api/auth/livreur/login",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "auth",
                                "livreur",
                                "login"
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Mon Profil Livreur",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{livreur_token}}",
                                "type": "text"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/auth/livreur/profile",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "auth",
                                "livreur",
                                "profile"
                            ]
                        }
                    },
                    "response": []
                }
            ]
        },
        {
            "name": "Auth Admin",
            "item": [
                {
                    "name": "Inscription Admin",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "var jsonData = pm.response.json();",
                                    "if (jsonData.token) {",
                                    "    pm.environment.set(\"admin_token\", jsonData.token);",
                                    "    console.log(\"✅ Token admin sauvegardé automatiquement\");",
                                    "}"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"firstName\": \"Admin\",\n    \"email\": \"admin@test.com\",\n    \"password\": \"password123\"\n}",
                            "options": {
                                "raw": {
                                    "language": "json"
                                }
                            }
                        },
                        "url": {
                            "raw": "{{base_url}}/api/auth/admin/register",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "auth",
                                "admin",
                                "register"
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Connexion Admin",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "var jsonData = pm.response.json();",
                                    "if (jsonData.token) {",
                                    "    pm.environment.set(\"admin_token\", jsonData.token);",
                                    "    console.log(\"✅ Token admin sauvegardé automatiquement\");",
                                    "}"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"email\": \"admin@test.com\",\n    \"password\": \"password123\"\n}",
                            "options": {
                                "raw": {
                                    "language": "json"
                                }
                            }
                        },
                        "url": {
                            "raw": "{{base_url}}/api/auth/admin/login",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "auth",
                                "admin",
                                "login"
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Dashboard Stats",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{admin_token}}",
                                "type": "text"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/admin/dashboard/stats",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "admin",
                                "dashboard",
                                "stats"
                            ]
                        }
                    },
                    "response": []
                }
            ]
        },
        {
            "name": "Gestion Livreur (Admin/Public)",
            "item": [
                {
                    "name": "Inscrire Livreur (Admin)",
                    "request": {
                        "method": "POST",
                        "header": [],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"nom\": \"Doe\",\n    \"prenom\": \"John\",\n    \"email\": \"john.doe@test.com\",\n    \"telephone\": \"0102030405\",\n    \"type_vehicule\": \"moto\"\n}",
                            "options": {
                                "raw": {
                                    "language": "json"
                                }
                            }
                        },
                        "url": {
                            "raw": "{{base_url}}/api/livreurs/register",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "livreurs",
                                "register"
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Définir Mot de Passe (via Token)",
                    "request": {
                        "method": "POST",
                        "header": [],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"token\": \"TOKEN_RECU_PAR_EMAIL\",\n    \"password\": \"nouveauPassword123\"\n}",
                            "options": {
                                "raw": {
                                    "language": "json"
                                }
                            }
                        },
                        "url": {
                            "raw": "{{base_url}}/api/livreurs/set-password",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "livreurs",
                                "set-password"
                            ]
                        }
                    },
                    "response": []
                }
            ]
        },
        {
            "name": "Espace Livreur (Commandes)",
            "item": [
                {
                    "name": "Commandes Disponibles",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{livreur_token}}",
                                "type": "text"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/livreur/commandes/disponibles",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "livreur",
                                "commandes",
                                "disponibles"
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Accepter Commande",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{livreur_token}}",
                                "type": "text"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/livreur/commandes/:id/accepter",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "livreur",
                                "commandes",
                                ":id",
                                "accepter"
                            ],
                            "variable": [
                                {
                                    "key": "id",
                                    "value": "1"
                                }
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Mes Livraisons en cours",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{livreur_token}}",
                                "type": "text"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/livreur/commandes/mes-livraisons",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "livreur",
                                "commandes",
                                "mes-livraisons"
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Historique Livraisons",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{livreur_token}}",
                                "type": "text"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/livreur/commandes/historique",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "livreur",
                                "commandes",
                                "historique"
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Terminer Livraison",
                    "request": {
                        "method": "PUT",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{livreur_token}}",
                                "type": "text"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"code_confirmation\": \"1234\" \n}",
                            "options": {
                                "raw": {
                                    "language": "json"
                                }
                            }
                        },
                        "url": {
                            "raw": "{{base_url}}/api/livreur/commandes/:id/terminer",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "livreur",
                                "commandes",
                                ":id",
                                "terminer"
                            ],
                            "variable": [
                                {
                                    "key": "id",
                                    "value": "1"
                                }
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Mettre à jour Position",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{livreur_token}}",
                                "type": "text"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"latitude\": 5.3453,\n    \"longitude\": -4.0244\n}",
                            "options": {
                                "raw": {
                                    "language": "json"
                                }
                            }
                        },
                        "url": {
                            "raw": "{{base_url}}/api/livreur/commandes/position",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "livreur",
                                "commandes",
                                "position"
                            ]
                        }
                    },
                    "response": []
                }
            ]
        },
        {
            "name": "Commandes (Utilisateur)",
            "item": [
                {
                    "name": "Créer Commande",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{user_token}}",
                                "type": "text"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"type_colis\": \"Document\",\n    \"poids\": 1.5,\n    \"expediteur_adresse\": \"Abidjan, Cocody\",\n    \"destinataire_adresse\": \"Abidjan, Marcory\",\n    \"destinataire_latitude\": 5.3167,\n    \"destinataire_longitude\": -4.0167,\n    \"destinataire_nom\": \"Jane Doe\",\n    \"destinataire_telephone\": \"0504030201\",\n    \"tarif\": 1500\n}",
                            "options": {
                                "raw": {
                                    "language": "json"
                                }
                            }
                        },
                        "url": {
                            "raw": "{{base_url}}/api/commandes",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "commandes"
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Mes Commandes",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{user_token}}",
                                "type": "text"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/commandes/mes-commandes",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "commandes",
                                "mes-commandes"
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Détails Commande",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{user_token}}",
                                "type": "text"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/commandes/:id",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "commandes",
                                ":id"
                            ],
                            "variable": [
                                {
                                    "key": "id",
                                    "value": "1"
                                }
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Annuler Commande",
                    "request": {
                        "method": "PUT",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{user_token}}",
                                "type": "text"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/commandes/:id/annuler",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "commandes",
                                ":id",
                                "annuler"
                            ],
                            "variable": [
                                {
                                    "key": "id",
                                    "value": "1"
                                }
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Suivre Commande (Public)",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{base_url}}/api/commandes/suivre/:reference",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "commandes",
                                "suivre",
                                ":reference"
                            ],
                            "variable": [
                                {
                                    "key": "reference",
                                    "value": "CMD2312011234"
                                }
                            ]
                        }
                    },
                    "response": []
                }
            ]
        }
    ],
    "variable": [
        {
            "key": "base_url",
            "value": "http://localhost:5000",
            "type": "string"
        },
        {
            "key": "user_token",
            "value": "",
            "type": "string"
        },
        {
            "key": "livreur_token",
            "value": "",
            "type": "string"
        },
        {
            "key": "admin_token",
            "value": "",
            "type": "string"
        }
    ]
}